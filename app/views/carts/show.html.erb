<p id="notice"><%= notice %></p>

<% @current_user.current_cart.line_items.each do |li| %>
  <% li.beer_id %>
  <% beer = Beer.find li.beer_id %>
  <h2><%= beer.title %></h2>
  <!-- <img src="<%= (beer.image_url) %>"/> -->
  <!-- <p><%= beer.description %></p> -->
  <h4><%= number_to_currency(beer.price) %></h4>
  <!-- Need some sort of extra logic which only lists beers with unique ids. if the id is not unique, the number of a specific beer should increase -->



  <br>
  <br>
<% end %>

<%= form_tag charges_path do %>
  <article>
    <label class="amount">
      <span>Amount:
        <% total = 0 %>
        <% cart_total = [] %>
        <% @current_user.current_cart.line_items.each do |li| %>
          <% li.beer_id %>
          <% beer = Beer.find li.beer_id %>
          <% cart_total << beer.price %>
          <% total = cart_total.reduce(:+) %>
        <% end %>
        <%= number_to_currency(total) %>
      </span>
    </label>
  </article>

  <script src="https://checkout.stripe.com/v2/checkout.js" class="stripe-button"
          data-key="<%= Rails.configuration.stripe[:publishable_key] %>"
          data-description="A month's subscription"
          data-amount="500"></script>
<% end %>

<%= link_to 'Edit', edit_cart_path(@cart) %> |
<%= link_to 'Back', carts_path %>
